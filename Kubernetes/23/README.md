# Sergey Sokolov
## Домашнее задание к занятию 15.4 "Кластеры. Ресурсы под управлением облачных провайдеров"

Организация кластера Kubernetes и кластера баз данных MySQL в отказоустойчивой архитектуре. Размещение в private подсетях кластера БД, а в public - кластера Kubernetes.
### Задание 1. Яндекс.Облако (обязательное к выполнению)

    Настроить с помощью Terraform кластер баз данных MySQL:

    Используя настройки VPC с предыдущих ДЗ, добавить дополнительно подсеть private в разных зонах, чтобы обеспечить отказоустойчивость
    Разместить ноды кластера MySQL в разных подсетях
    Необходимо предусмотреть репликацию с произвольным временем технического обслуживания
    Использовать окружение PRESTABLE, платформу Intel Broadwell с производительностью 50% CPU и размером диска 20 Гб
    Задать время начала резервного копирования - 23:59
    Включить защиту кластера от непреднамеренного удаления
    Создать БД с именем netology_db c логином и паролем

    Настроить с помощью Terraform кластер Kubernetes

    Используя настройки VPC с предыдущих ДЗ, добавить дополнительно 2 подсети public в разных зонах, чтобы обеспечить отказоустойчивость
    Создать отдельный сервис-аккаунт с необходимыми правами
    Создать региональный мастер kubernetes с размещением нод в разных 3 подсетях
    Добавить возможность шифрования ключом из KMS, созданного в предыдущем ДЗ
    Создать группу узлов состояющую из 3 машин с автомасштабированием до 6
    Подключиться к кластеру с помощью kubectl
    *Запустить микросервис phpmyadmin и подключиться к БД, созданной ранее
    *Создать сервис типы Load Balancer и подключиться к phpmyadmin. Предоставить скриншот с публичным адресом и подключением к БД   
    
 [Файл с манифестом для терраформа]()  
 [Файл c манифестом kubernetes]()  
 Создал кластера MySqL и kubernetes 
![image](https://user-images.githubusercontent.com/93119897/221963810-0ec1ec53-d2b8-40b8-858a-04ee9182d164.png)
 Сохранил локально конфиг для подключения к кластеру кубера  
![image](https://user-images.githubusercontent.com/93119897/221964089-4fffac2c-78f1-4b3d-b63a-44f4ed9be5e3.png)
![image](https://user-images.githubusercontent.com/93119897/221964465-9bba49e1-66be-4723-8b11-989bb0b61494.png)
Запустил манифест с подами php my admin  
![image](https://user-images.githubusercontent.com/93119897/221964724-9895a5d0-6716-4701-91b5-c02abb45988d.png)
Подключился к консоли phpMyAdmin через проброс портов и козданной базе
![image](https://user-images.githubusercontent.com/93119897/221965099-c04b910b-1304-40ff-bdef-32f9b9d1feea.png)
Балансировщик , я пробовал создавать и в манифесте и отдельно через команду кубктл и через консоль яндекс облака. Всегда возникает ошибка с правами при создании к каталогу.  
Из-за чего она возникает я не могу понять, был бы признателен за пояснение. 
![image](https://user-images.githubusercontent.com/93119897/221965756-6d0638b8-f5d4-4a99-bc2f-80908270a50c.png)
