# Sergey Sokolov
## Домашнее задание к занятию "12.2 Команды для работы с Kubernetes"

Кластер — это сложная система, с которой крайне редко работает один человек. Квалифицированный devops умеет наладить работу всей команды, занимающейся каким-либо сервисом. После знакомства с кластером вас попросили выдать доступ нескольким разработчикам. Помимо этого требуется служебный аккаунт для просмотра логов.
### Задание 1: Запуск пода из образа в деплойменте

Для начала следует разобраться с прямым запуском приложений из консоли. Такой подход поможет быстро развернуть инструменты отладки в кластере. Требуется запустить деплоймент на основе образа из hello world уже через deployment. Сразу стоит запустить 2 копии приложения (replicas=2).

Требования:

    пример из hello world запущен в качестве deployment
    количество реплик в deployment установлено в 2
    наличие deployment можно проверить командой kubectl get deployment
    наличие подов можно проверить командой kubectl get pods  
![image](https://user-images.githubusercontent.com/93119897/202544128-4f3382c9-664e-48c1-8326-867f67d44c6b.png)

### Задание 2: Просмотр логов для разработки

Разработчикам крайне важно получать обратную связь от штатно работающего приложения и, еще важнее, об ошибках в его работе. Требуется создать пользователя и выдать ему доступ на чтение конфигурации и логов подов в app-namespace.

Требования:

    создан новый токен доступа для пользователя
    пользователь прописан в локальный конфиг (~/.kube/config, блок users)
    пользователь может просматривать логи подов и их конфигурацию (kubectl logs pod <pod_id>, kubectl describe pod <pod_id>)

Делал по этой инструкции https://medium.com/@HoussemDellai/rbac-with-kubernetes-in-minikube-4deed658ea7b
Создал тестового пользователя, и в его дерриктории ключ, запрос на подпись  
![image](https://user-images.githubusercontent.com/93119897/202544800-ff425686-223e-4ac8-945c-51f81884b5aa.png)  
![image](https://user-images.githubusercontent.com/93119897/202544870-8ba10cfa-fc23-4172-bdac-07ec4d7abc09.png)
Сгенерировал сертификат в миникубе на 500 дней   
![image](https://user-images.githubusercontent.com/93119897/202545504-a7d8f737-54f6-472c-b9a6-c359bd02da72.png)
Создал пользователя и контекст в кубконфиге  
![image](https://user-images.githubusercontent.com/93119897/202545991-b955ee63-e6f5-45d2-8368-238fb571addc.png)
Создал файлы с настройками ролей и добавил их в конфигурацию  
![image](https://user-images.githubusercontent.com/93119897/202546695-1e139b37-077d-4b14-8c02-1f955b44c313.png)
![image](https://user-images.githubusercontent.com/93119897/202546710-3924393b-f53d-46b0-a1f0-484153d134be.png)
![image](https://user-images.githubusercontent.com/93119897/202546786-ec430a67-7989-4f0e-b203-338d009633b5.png)
Проверил доступ к логам и описанию пода переключившить на тест  
![image](https://user-images.githubusercontent.com/93119897/202547251-d274a41a-a756-4611-bffa-a28678bc327b.png)
![image](https://user-images.githubusercontent.com/93119897/202547310-be4661de-d6ee-47a3-a6bd-ba7836d1d26f.png)
И отсутствие других прав
![image](https://user-images.githubusercontent.com/93119897/202547482-c812bc0c-5c3e-4239-8d5c-3a8de33cb42d.png)

### Задание 3: Изменение количества реплик

Поработав с приложением, вы получили запрос на увеличение количества реплик приложения для нагрузки. Необходимо изменить запущенный deployment, увеличив количество реплик до 5. Посмотрите статус запущенных подов после увеличения реплик.

Требования:

    в deployment из задания 1 изменено количество реплик на 5
    проверить что все поды перешли в статус running (kubectl get pods)  
![image](https://user-images.githubusercontent.com/93119897/202544228-d121d7fe-d7d0-4127-9ed9-b077f64bd487.png)
![image](https://user-images.githubusercontent.com/93119897/202544355-f2019157-3b29-415c-89fd-43acf444c1e7.png)


